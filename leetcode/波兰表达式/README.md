算术表达式的三种写法：

- 前缀表达式：操作符在操作数的前面，比如`+-543`
- 中缀表达式：操作符在操作数的中间，是符合人类习惯的，比如`3+4-5`
- 后缀表达式：操作符在操作数的后面，比如`34+5-`

人类很容易就能够计算出中缀表达式的值，但是计算机却不这样，计算机能够很快的计算出前缀和后缀表达式的值，因此我们通常是将中缀表达式转换成后缀表达式/前缀表达式，然后再进行计算

[leetcode224.基本计算器](https://leetcode-cn.com/problems/basic-calculator/)

后缀表达式的严格定义是**不包含括号**，运算符放在两个运算对象后面，所有的计算按照运算符出现的顺序，严格从左向右进行（不用再考虑运算符的优先规则）

**后缀表达式的计算：**由于后缀表达式的运算符是在两个操作数的后面，所以计算机在解析后缀表达式的时候，只需要从左向右扫描，也就是只需要向前扫描，而不用回头扫描，遇到运算符就将运算符放在前面两个运算符中间（这里先不考虑乘方类似的单目运算），一直运算到最右边的运算符，那么就能得到结果了。

因为我们平时最常见的是中缀表达式，所以这时就涉及到了一个问题：**如何将中缀表达式转换成后缀表达式？**，转换规则如下：

- 初始化一个运算符栈，一个存储中间结果的栈
- 从左到右扫描中缀表达式：
  - 遇到操作数时，将其压入存储中间结果的栈
  - 遇到运算符时，比较该运算符与运算符栈栈顶元素的优先级
    - 如果运算符栈为空，或者运算符栈的栈顶元素是`(`，则可以直接将此运算符入栈
    - 如果当前运算符的优先级比栈顶运算符的优先级高，也将当前运算符压入运算符栈中
    - 如果当前运算符的优先级比栈顶运算符的优先级低，那么将栈顶元素弹出，压入到中间结果栈中，继续与运算符栈的栈顶元素比较
  - 遇到括号时：
    - 当遇到`(`的时候，直接压入到运算符栈中
    - 当遇到`)`的时候，依次弹出运算符栈中的元素，压入到存储中间结果的栈中，直到遇到`(`，此时将这一对括号丢弃
- 如果扫描到了最右边，运算符栈中还有元素，那么把剩余的元素依次弹出并压入到存储中间结果的栈中
- 依次弹出存储中间结果的栈中的元素，结果的逆序就是中缀表达式对应的逆波兰表达式（后缀）



> **<font color=red>我觉得上述思路中，应该把负数看成一个整体，比如-2+1，他的后缀表达式是2-1+，看成整体目前我还没有写出来</font>**



因此，计算一个中缀表达式的过程可以分成两步

```java
public int calculate(String infix) {
    String suffix = inFixToSuffix(infix);
    return calculateSuffix(suffix);
}
// 具体代码见PolandNotation.java
```



